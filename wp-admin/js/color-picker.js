!function(o,e){var t,i='<a tabindex="0" class="wp-color-result" />',r='<div class="wp-picker-holder" />',l='<div class="wp-picker-container" />',n='<input type="button" class="button button-small hidden" />';t={options:{defaultColor:!1,change:!1,clear:!1,hide:!0,palettes:!0,width:255,mode:"hsv"},_create:function(){if(o.support.iris){var e=this,t=e.element;o.extend(e.options,t.data()),e.close=o.proxy(e.close,e),e.initialValue=t.val(),t.addClass("wp-color-picker").hide().wrap(l),e.wrap=t.parent(),e.toggler=o(i).insertBefore(t).css({backgroundColor:e.initialValue}).attr("title",wpColorPickerL10n.pick).attr("data-current",wpColorPickerL10n.current),e.pickerContainer=o(r).insertAfter(t),e.button=o(n),e.options.defaultColor?e.button.addClass("wp-picker-default").val(wpColorPickerL10n.defaultString):e.button.addClass("wp-picker-clear").val(wpColorPickerL10n.clear),t.wrap('<span class="wp-picker-input-wrap" />').after(e.button),t.iris({target:e.pickerContainer,hide:e.options.hide,width:e.options.width,mode:e.options.mode,palettes:e.options.palettes,change:function(t,i){e.toggler.css({backgroundColor:i.color.toString()}),o.isFunction(e.options.change)&&e.options.change.call(this,t,i)}}),t.val(e.initialValue),e._addListeners(),e.options.hide||e.toggler.click()}},_addListeners:function(){var e=this;e.wrap.on("click.wpcolorpicker",function(o){o.stopPropagation()}),e.toggler.click(function(){e.toggler.hasClass("wp-picker-open")?e.close():e.open()}),e.element.change(function(t){var i=o(this),r=i.val();(""===r||"#"===r)&&(e.toggler.css("backgroundColor",""),o.isFunction(e.options.clear)&&e.options.clear.call(this,t))}),e.toggler.on("keyup",function(o){(13===o.keyCode||32===o.keyCode)&&(o.preventDefault(),e.toggler.trigger("click").next().focus())}),e.button.click(function(t){var i=o(this);i.hasClass("wp-picker-clear")?(e.element.val(""),e.toggler.css("backgroundColor",""),o.isFunction(e.options.clear)&&e.options.clear.call(this,t)):i.hasClass("wp-picker-default")&&e.element.val(e.options.defaultColor).change()})},open:function(){this.element.show().iris("toggle").focus(),this.button.removeClass("hidden"),this.wrap.addClass("wp-picker-active"),this.toggler.addClass("wp-picker-open"),o("body").trigger("click.wpcolorpicker").on("click.wpcolorpicker",this.close)},close:function(){this.element.hide().iris("toggle"),this.button.addClass("hidden"),this.wrap.removeClass("wp-picker-active"),this.toggler.removeClass("wp-picker-open"),o("body").off("click.wpcolorpicker",this.close)},color:function(o){return o===e?this.element.iris("option","color"):void this.element.iris("option","color",o)},defaultColor:function(o){return o===e?this.options.defaultColor:void(this.options.defaultColor=o)}},o.widget("wp.wpColorPicker",t)}(jQuery);